package com.minkang.ultimate.titles;
import org.bukkit.*; import org.bukkit.entity.Player; import org.bukkit.inventory.*; import org.bukkit.inventory.meta.*;
public class ColorChatGUI { private final Main plugin; private final ColorChatService service;
public ColorChatGUI(Main plugin, ColorChatService service){ this.plugin=plugin; this.service=service; }
public void open(Player p){ int size=plugin.getConfig().getInt("colorchat.gui.size",54); String title=Chat.color(plugin.getConfig().getString("colorchat.gui.title","&8색깔채팅")); Inventory inv=Bukkit.createInventory(p,size,title); PlayerData d=plugin.storage().get(p.getUniqueId()); for(ColorDef def: service.all()){ if(!d.getColorsOwned().contains(def.id.toLowerCase())) continue; ItemStack it=new ItemStack(def.material); ItemMeta im=it.getItemMeta(); im.setDisplayName(Chat.color(def.code+def.name)); java.util.List<String> lore=new java.util.ArrayList<>(); lore.add(Chat.color("&7우클릭: 적용")); if(def.id.equalsIgnoreCase(d.getActiveColorId())) lore.add(Chat.color("&a현재 적용 중")); im.setLore(lore); im.addItemFlags(ItemFlag.HIDE_ATTRIBUTES); it.setItemMeta(im); for(int i=0;i<size-1;i++) if(inv.getItem(i)==null){ inv.setItem(i,it); break; } } String rname=plugin.getConfig().getString("colorchat.gui.reset_button.name","&7[원래대로] 색깔 해제"); String rmat=plugin.getConfig().getString("colorchat.gui.reset_button.material","BARRIER"); Material m=Material.matchMaterial(rmat); if(m==null) m=Material.BARRIER; ItemStack reset=new ItemStack(m); ItemMeta rim=reset.getItemMeta(); rim.setDisplayName(Chat.color(rname)); reset.setItemMeta(rim); inv.setItem(size-1, reset); p.openInventory(inv); p.sendMessage(Chat.color(plugin.msg("prefix")+plugin.msg("colorchat.open_gui"))); }
}